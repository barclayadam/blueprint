pool:
  vmImage: 'windows-latest'

steps:
  - task: UseDotNet@2
    inputs:
      packageType: 'runtime'
      version: '2.2.5'

  - task: UseDotNet@2
    inputs:
      packageType: 'sdk'
      version: '3.0.100-preview9-014004'

  - task: PowerShell@2
    displayName: 'Build / Test / Create Packages'
    inputs:
      targetType: inline
      script: .\build.ps1 -PullRequestNumber $env:SYSTEM_PULLREQUEST_PULLREQUESTNUMBER

  - task: PublishTestResults@2
    displayName: 'Publish Test Results **/*.trx'
    condition: succeededOrFailed()
    inputs:
      testRunner: VSTest
      testResultsFiles: '**/*.trx'